<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd" >
<mapper namespace="com.shangpin.ephub.data.mysql.modifyDataStatus.state.mapper.ModifyDataStatusMapper" >
  
  <update id="updateStatus">
    update  hub_spu_pending p inner join (select supplier_spu_id from hub_supplier_sku   group by supplier_spu_id having sum(stock)>1) tmp on p.supplier_spu_id = tmp.supplier_spu_id set p.stock_state = 1 where p.stock_state = 0
  </update>
  
  <update id="updatePicStatus">
    update  hub_spu_pending s left join hub_spu_pending_pic p  on s.supplier_id = p.supplier_id and s.supplier_spu_no = p.supplier_spu_no set s.pic_state = 2 where s.pic_state = 3 and p.spu_pending_pic_id is not null and p.data_state = 1
  </update>
  
</mapper>